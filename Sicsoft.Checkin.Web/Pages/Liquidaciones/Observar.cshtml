@page "{id}"
@model GestionGastos20.Pages.Liquidaciones.ObservarModel
@{
    ViewData["Title"] = "Liquidaciones";
}
@section styles{
    <style>


        .lab {
            font-weight: 400;
            font-size: 13px;
        }

        .lab2 {
            font-weight: 400;
            font-size: 13px;
        }

        .label {
            color: #fff !important;
            background-color: #57b846 !important;
            cursor: pointer;
            text-decoration: underline;
            background: none;
            font-size: 17px;
            padding: 8px 18px !important;
        }

        .label-submit {
            color: #fff !important;
            background-color: #57b846 !important;
            cursor: pointer;
            background: none;
            font-size: 13px;
            padding: 8px 18px !important;
        }
        /*label
                                {
                                    font-size: 15px;
                                }*/

        #imgGalerias {
            display: none;
        }

    </style>

}
    @using Microsoft.AspNetCore.Http
    @using System;
    @using System.Collections.Generic;
    @using System.IO;
    @using System.Linq;
    @using System.Security.Claims;
    @using System.Threading.Tasks;
    @using Microsoft.AspNetCore.Mvc;
    @using Microsoft.AspNetCore.Mvc.RazorPages;
    @using Microsoft.Extensions.Configuration;
    @using Refit;
    @inject IHttpContextAccessor httpContextAccessor
@{
    var Roles = ((ClaimsIdentity)User.Identity).Claims.Where(d => d.Type == "Roles").Select(s1 => s1.Value).FirstOrDefault().Split("|");
    var MiRol = int.Parse(((ClaimsIdentity)User.Identity).Claims.Where(d => d.Type == ClaimTypes.Role).Select(s1 => s1.Value).FirstOrDefault());
    var RolAdmin = Model.Rols.Where(a => a.NombreRol.ToUpper().Contains("Administrador".ToUpper())).FirstOrDefault();

    var bandera = MiRol == RolAdmin.idRol;
}
@{
    NumberFormatInfo formato = new CultureInfo("en-US").NumberFormat;
    formato.CurrencyGroupSeparator = ",";
    formato.NumberDecimalSeparator = ".";


}
@section scripts{
    <script>
        function Aceptar() {
            Swal.fire({
                title: '¿Desea aceptar esta liquidación?',
                showDenyButton: true,
                showCancelButton: false,
                confirmButtonText: `Aceptar`,
                denyButtonText: `Cancelar`,
                customClass: {
                    confirmButton: 'swalBtnColor',
                    denyButton: 'swalDeny'
                },
            }).then((result) => {
                if (result.isConfirmed) {
                    $.ajax({
                        type: 'GET',

                        url: '@Url.Page("Observar", "Aceptar")',
                        dataType: 'text',
                        data: { idB: $("#idCierre").text(), comentario: $("#Comentario").val() },
                        headers: {
                            RequestVerificationToken: $('input:hidden[name="__RequestVerificationToken"]').val()
                        },
                        success: function(json) {

                            $("#divProcesando").hide();

                            if ($('.modal-backdrop').is(':visible')) {

                                $('body').removeClass('modal-open');
                                $('.modal-backdrop').hide();
                            }
                            console.log("resultado " + json);
                            if (json == "true") {
                                Swal.fire({
                                    title: "Ha sido aceptado con éxito",

                                    icon: 'success',
                                    showCancelButton: false,

                                    confirmButtonText: 'OK',
                                    customClass: {
                                        confirmButton: 'swalBtnColor',

                                    },
                                }).then((result) => {
                                    if (result.isConfirmed) {
                                        window.location.href = window.location.href.split("/Observar")[0];
                                    }
                                })

                            } else {
                                Swal.fire({
                                    icon: 'error',
                                    title: 'Oops...',
                                    text: 'Ha ocurrido un error al intentar aceptar'

                                })
                            }
                        },

                        beforeSend: function(xhr) {

                            $("#divProcesando").modal("show");
                        },
                        complete: function() {

                        },
                        error: function(error) {

                        }
                    });
                }
            })

        }

        function Rechazar() {
            Swal.fire({
                title: '¿Desea rechazar esta liquidación?',
                showDenyButton: true,
                showCancelButton: false,
                confirmButtonText: `Aceptar`,
                denyButtonText: `Cancelar`,
                customClass: {
                    confirmButton: 'swalBtnColor',
                    denyButton: 'swalDeny'
                },
            }).then((result) => {
                if (result.isConfirmed) {
                    $.ajax({
                        type: 'GET',

                        url: '@Url.Page("Observar", "Rechazar")',
                        dataType: 'text',
                        data: { idB: $("#idCierre").text(), comentario: $("#Comentario").val() },
                        headers: {
                            RequestVerificationToken: $('input:hidden[name="__RequestVerificationToken"]').val()
                        },
                        success: function(json) {

                            $("#divProcesando").hide();

                            if ($('.modal-backdrop').is(':visible')) {

                                $('body').removeClass('modal-open');
                                $('.modal-backdrop').hide();
                            }
                            console.log("resultado " + json);
                            if (json == "true") {
                                Swal.fire({
                                    title: "Ha sido rechazado con éxito",

                                    icon: 'success',
                                    showCancelButton: false,

                                    confirmButtonText: 'OK',
                                    customClass: {
                                        confirmButton: 'swalBtnColor',

                                    },
                                }).then((result) => {
                                    if (result.isConfirmed) {
                                        window.location.href = window.location.href.split("/Observar")[0];
                                    }
                                })

                            } else {
                                Swal.fire({
                                    icon: 'error',
                                    title: 'Oops...',
                                    text: 'Ha ocurrido un error al intentar aceptar'

                                })
                            }
                        },

                        beforeSend: function(xhr) {

                            $("#divProcesando").modal("show");
                        },
                        complete: function() {

                        },
                        error: function(error) {

                        }
                    });
                }
            })

        }
        function Llamar(data) {
            const base64ImageData = 'data:image/png;base64,' + data;
            const contentType = 'image/png';

            const byteCharacters = atob(base64ImageData.substr(`data:${contentType};base64,`.length));
            const byteArrays = [];

            for (let offset = 0; offset < byteCharacters.length; offset += 1024) {
                const slice = byteCharacters.slice(offset, offset + 1024);

                const byteNumbers = new Array(slice.length);
                for (let i = 0; i < slice.length; i++) {
                    byteNumbers[i] = slice.charCodeAt(i);
                }

                const byteArray = new Uint8Array(byteNumbers);

                byteArrays.push(byteArray);
            }
            const blob = new Blob(byteArrays, { type: contentType });
            const blobUrl = URL.createObjectURL(blob);

            window.open(blobUrl, '_blank');
        }
        $(document).ready(function() {
            jQuery(document).ready(function($) {

            });



            $(document).ready(function() {

            });


        });

        function ImprimirPantalla() {
            try {
                // window.print();
                var margins = {
                    top: 10,
                    bottom: 10,
                    left: 10,
                    width: 595
                };


                html = $("#idHtml2").html();
                html2pdf(html, {
                    margin: 1,
                    padding: 0,
                    filename: 'Liquidaciones.pdf',
                    image: { type: 'jpeg', quality: 1 },
                    html2canvas: { scale: 2, logging: true },
                    jsPDF: { unit: 'in', format: 'A2', orientation: 'P' },
                    class: ImprimirPantalla
                });

            } catch (e) {
                console.log(e);
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: 'Ha ocurrido un error al intentar imprimir ' + e

                })
            }
        }
        ///Enviar Correo

        function EnviarCorreo() {
            var htmlCodigo = "";
            var htmlCodigoFinal = "";

            var html = '<html><head> <meta charset="utf-8" /> ';
            html += '<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">';
            html += '<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous">';
            html += '</scrip' + 't>';
            html += '</head> ';
            html += '<body>';
            html += ' <div class="row"> <div class="col-sm-12" style="text-align: center;"> <h2> Liquidación por revisar </h2> </div> </div>';
            html += '<div class="row"> <div class="col-sm-12"> <br> </div> </div>';
            htmlCodigo += $("#idHtml2").html();
            htmlCodigoFinal += '</';
            htmlCodigoFinal += 'b';
            htmlCodigoFinal += 'ody>';
            htmlCodigoFinal += '</html>';

            var recibido =
            {
                idCierre: parseInt($("#idCierre").text()),
                emailDest: $("#emailEnvio").val(),
                emailCC: $("#emailCCEnvio").val(),
                body: html,
                bodyMedio: htmlCodigo,
                bodyFinal: htmlCodigoFinal
            };

            Swal.fire({
                title: '¿Desea enviar por correo esta liquidación?',
                showDenyButton: true,
                showCancelButton: false,
                confirmButtonText: `Aceptar`,
                denyButtonText: `Cancelar`,
                customClass: {
                    confirmButton: 'swalBtnColor',
                    denyButton: 'swalDeny'
                },
            }).then((result) => {
                if (result.isConfirmed) {
                    console.log(html);
                    var recibidos = JSON.stringify(recibido);
                    $.ajax({
                        type: 'POST',

                        url: '@Url.Page("Observar", "EnviarCorreo")',
                        dataType: 'json',
                        data: { recibido: recibidos.toString() },
                        headers: {
                            RequestVerificationToken: $('input:hidden[name="__RequestVerificationToken"]').val()
                        },
                        success: function(json) {

                            $("#divProcesando").hide();

                            if ($('.modal-backdrop').is(':visible')) {

                                $('body').removeClass('modal-open');
                                $('.modal-backdrop').hide();
                            }
                            console.log("resultado " + json);
                            if (json == true) {
                                Swal.fire({
                                    title: "Ha sido enviado con éxito",

                                    icon: 'success',
                                    showCancelButton: false,

                                    confirmButtonText: 'OK',
                                    customClass: {
                                        confirmButton: 'swalBtnColor',

                                    },
                                }).then((result) => {
                                    if (result.isConfirmed) {
                                        window.location.href = window.location.href.split("/Observar")[0];
                                    }
                                })

                            } else {
                                Swal.fire({
                                    icon: 'error',
                                    title: 'Oops...',
                                    text: 'Ha ocurrido un error al intentar enviar'

                                })
                            }
                        },

                        beforeSend: function(xhr) {

                            $("#divProcesando").modal("show");
                        },
                        complete: function() {

                        },
                        error: function(error) {

                        }
                    });
                }
            })

        }
    </script>



}

    @using Newtonsoft.Json;
    @using System.Globalization
    <!-- Content Header (Page header) -->
    <section class="content-header">
        <h1>
            Liquidaciones
        </h1>
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="#"><i class="ti-dashboard"></i></a></li>
            <li class="breadcrumb-item active">Observar Liquidación</li>
        </ol>
    </section>

    <section class="content ">
        <div class="row">
            <div class="col-12">

                <div class="box">
                    <div class="box-header with-border">
                        <div class="row">
                            <div class="col-8">
                                <h6 class="box-subtitle">Observar Liquidación</h6>


                            </div>
                            <div class="col-4">
                                <a asp-page="./Index" class="nav-link text-dark" style="text-decoration: underline;"><i class="ti-back-left "></i>  Regresar</a>

                                &nbsp;



                            </div>
                        </div>
                    </div>
                    <div class="box-body">
                        <!-- title row -->

                        <div class="row">

                            <div class="col-12">
                                <div class="page-header mt-0">
                                    <h2 class="d-inline"><span class="font-size-24">Liquidación No:   @Model.Liquidacion.EncCierre.idCierre</span></h2>
                                    <br />
                                    <div class="text-left">
                                        <div class="row">

                                            <div class="col-4">
                                                <h5> <b>Periodo:</b> @Model.Liquidacion.EncCierre.Periodo</h5>

                                            </div>

                                            <div class="col-4">
                                                <h5> <b>Fecha:</b>   @DateTime.Now.ToString("dd/MM/yyyy")</h5>

                                            </div>











                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- /.col -->
                        </div>
                        <!-- info row -->
                        <div class="row invoice-info">
                            <div class="col-md-4 invoice-col">
                                <strong>Usuario</strong>
                                <address>
                                    <strong class="text-blue font-size-24"> @( Model.Usuarios.Where(a => a.id == Model.Liquidacion.EncCierre.idLogin).FirstOrDefault() == null ? "Usuario Inexistente" : Model.Usuarios.Where(a => a.id == Model.Liquidacion.EncCierre.idLogin).FirstOrDefault().id + " - "+ Model.Usuarios.Where(a => a.id == Model.Liquidacion.EncCierre.idLogin).FirstOrDefault().Nombre)  </strong>


                                </address>
                            </div>



                            <!-- /.col -->
                        </div>
                        <!-- /.row -->
                        <!-- Table row -->

                        <div class="row">
                            <div class="col-12 table-responsive">
                                <table class="table table-bordered">
                                    <thead>
                                        <tr class="bg-pale-info">
                                            <th class="text-center">Cons. Hacienda</th>
                                            <th class="text-center">Fecha</th>
                                            <th class="text-center">Cod. Proveedor</th>
                                            <th class="text-center">Proveedor</th>
                                            <th class="text-center">Tipo de Gasto</th>
                                            <th class="text-center">Comentario</th>
                                            <th class="text-center">Total</th>


                                        </tr>
                                    </thead>
                                    <tbody>

                                        @foreach (var item in Model.Objeto)
                                    {
                                        <tr>

                                            @if (string.IsNullOrEmpty(item.ImagenB64))
                                            {
                                                <td align="center" style="padding-top:15px;">  <a style="font-size:15px;" href="@item.PdfFactura" target="_blank">@item.ConsecutivoHacienda </a></td>
                                            }
                                            else
                                            {
                                                <td align="center" style="padding-top:15px;">  <a style="font-size:15px; text-decoration: underline; text-decoration-color:blue; color: blue;" onclick="javascript: Llamar('@item.ImagenB64')">@item.ConsecutivoHacienda </a></td>
                                            }







                                            <td class="text-center">@item.FecFactura.Value.ToString("dd/MM/yyyy") </td>
                                            <td>

                                                @if (Model.Pais == "P")
                                                {
                                                    <p style="font-size:13px;">@item.CodProveedor.Split("[")[0]  [ @item.CodProveedor.Split("[")[1] ]   </p>
                                                }
                                                else if (Model.Pais == "C")
                                                {
                                                    <p style="font-size:13px;">@item.CodProveedor </p>
                                                }
                                                else if (Model.Pais == "N" || Model.Pais == "D" || Model.Pais == "H")
                                                {
                                                    <p style="font-size:13px;">@item.CodProveedor.Split("[")[0]   </p>

                                                }
                                                 



                                            </td>
                                            <td>   @item.NomProveedor</td>
                                            <td>   @item.TipoGasto</td>
                                            <td>   @(item.Comentario == null ? "" : item.Comentario)</td>
                                            <td> @decimal.Round(item.TotalComprobante.Value, 2).ToString("N", formato)</td>


                                        </tr>
                                    }


                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">

                            <div class="form-group">
                                <label>Observaciones</label>
                                <div class="col-md-12">
                                    @if (Model.Liquidacion.EncCierre.Estado == "E")
                                    {
                                        @if (!string.IsNullOrEmpty(Roles.Where(a => a == "8").FirstOrDefault()))
                                        {
                                            @if (Model.Liquidacion.EncCierre.idLogin != int.Parse(((ClaimsIdentity)User.Identity).Claims.Where(d => d.Type == ClaimTypes.Actor).Select(s1 => s1.Value).FirstOrDefault()) && !bandera)
                                            {
                                                <textarea rows="5" class="form-control" id="Comentario" asp-for="Liquidacion.EncCierre.Observacion"></textarea>
                                            }
                                            else
                                            {
                                                <textarea rows="5" class="form-control" id="Comentario" asp-for="Liquidacion.EncCierre.Observacion" readonly></textarea>
                                            }
                                        }
                                        else
                                        {
                                            <textarea rows="5" class="form-control" id="Comentario" asp-for="Liquidacion.EncCierre.Observacion" readonly></textarea>
                                        }
                                    }
                                    else
                                    {
                                        <textarea rows="5" class="form-control" id="Comentario" asp-for="Liquidacion.EncCierre.Observacion" readonly></textarea>
                                    }
                                </div>



                            </div>

                        </div>


                        <div class="col-md-6" style="text-align: right;">
                            <div class="row">

                                <div class="col-md-12">

                                    <table class="table">
                                        <tbody>
                                            <tr>
                                                <td style="text-align: right;">
                                                    <label class="col-form-label" style="display: inline-table; font-weight: 500 !important; font-style: normal;">SubTotal:</label>

                                                </td>
                                                <td>
                                                    <label id="subtotal" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.SubTotal.Value, 2).ToString("N", formato)</label>
                                                </td>

                                            </tr>
                                            <tr>

                                                <td style="text-align: right;">
                                                    <label class="col-form-label" style="display: inline-table;  font-weight: 500 !important; font-style: normal;"> Descuento:</label>

                                                </td>
                                                <td>
                                                    <label id="descuento" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.Descuento.Value, 2).ToString("N", formato)</label>
                                                </td>
                                            </tr>
                                            <tr>

                                                <td style="text-align: right;">
                                                    <label class="col-form-label" style="display: inline-table;  font-weight: 500 !important; font-style: normal;"> Impuesto:</label>

                                                </td>
                                                <td>
                                                    <label id="impuesto" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.Impuestos.Value, 2).ToString("N", formato)</label>
                                                </td>
                                            </tr>

                                            @if (Model.Pais == "C")
                                            {



                                                <tr>

                                                    <td style="text-align: right;">
                                                        <label class="col-form-label" style="display: inline-table;  font-weight: 500 !important; font-style: normal;"> I.V.A 1:</label>

                                                    </td>
                                                    <td>
                                                        <label id="impuesto1" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.Impuesto1, 2).ToString("N", formato)</label>
                                                    </td>
                                                </tr>

                                                <tr>

                                                    <td style="text-align: right;">
                                                        <label class="col-form-label" style="display: inline-table;  font-weight: 500 !important; font-style: normal;"> I.V.A 2:</label>

                                                    </td>
                                                    <td>
                                                        <label id="impuesto2" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.Impuesto2, 2).ToString("N", formato)</label>
                                                    </td>
                                                </tr>

                                                <tr>

                                                    <td style="text-align: right;">
                                                        <label class="col-form-label" style="display: inline-table;  font-weight: 500 !important; font-style: normal;"> I.V.A 4:</label>

                                                    </td>
                                                    <td>
                                                        <label id="impuesto4" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.Impuesto4, 2).ToString("N", formato)</label>
                                                    </td>
                                                </tr>

                                                <tr>

                                                    <td style="text-align: right;">
                                                        <label class="col-form-label" style="display: inline-table;  font-weight: 500 !important; font-style: normal;"> I.V.A 8:</label>

                                                    </td>
                                                    <td>
                                                        <label id="impuesto8" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.Impuesto8, 2).ToString("N", formato)</label>
                                                    </td>
                                                </tr>

                                                <tr>

                                                    <td style="text-align: right;">
                                                        <label class="col-form-label" style="display: inline-table;  font-weight: 500 !important; font-style: normal;"> I.V.A 13:</label>

                                                    </td>
                                                    <td>
                                                        <label id="impuesto13" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.Impuesto13, 2).ToString("N", formato)</label>
                                                    </td>
                                                </tr>

                                                <tr>

                                                    <td style="text-align: right;">
                                                        <label class="col-form-label" style="display: inline-table;  font-weight: 500 !important; font-style: normal;"> Otros Cargos:</label>

                                                    </td>
                                                    <td>
                                                        <label id="impuesto13" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.TotalOtrosCargos, 2).ToString("N", formato)</label>
                                                    </td>
                                                </tr>
                                            }
                                            else if (Model.Pais == "P")
                                            {
                                                <tr>

                                                    <td style="text-align: right;">
                                                        <label class="col-form-label" style="display: inline-table;  font-weight: 500 !important; font-style: normal;"> ITBMS(7%):</label>

                                                    </td>
                                                    <td>
                                                        <label id="impuesto1" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.Impuesto1, 2).ToString("N", formato)</label>
                                                    </td>
                                                </tr>
                                                <tr>

                                                    <td style="text-align: right;">
                                                        <label class="col-form-label" style="display: inline-table;  font-weight: 500 !important; font-style: normal;"> ITBMS(10%):</label>

                                                    </td>
                                                    <td>
                                                        <label id="impuesto2" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.Impuesto2, 2).ToString("N", formato)</label>
                                                    </td>
                                                </tr>
                                            }
                                            else if (Model.Pais == "N")
                                            {
                                                <tr>

                                                    <td style="text-align: right;">
                                                        <label class="col-form-label" style="display: inline-table;  font-weight: 500 !important; font-style: normal;"> IV(13%):</label>

                                                    </td>
                                                    <td>
                                                        <label id="impuesto1" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.Impuesto1, 2).ToString("N", formato)</label>
                                                    </td>
                                                </tr>
                                                <tr>

                                                    <td style="text-align: right;">
                                                        <label class="col-form-label" style="display: inline-table;  font-weight: 500 !important; font-style: normal;"> IVA(15%):</label>

                                                    </td>
                                                    <td>
                                                        <label id="impuesto2" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.Impuesto2, 2).ToString("N", formato)</label>
                                                    </td>
                                                </tr>
                                            }
                                            else if (Model.Pais == "D")
                                            {
                                                <tr>

                                                    <td style="text-align: right;">
                                                        <label class="col-form-label" style="display: inline-table;  font-weight: 500 !important; font-style: normal;"> IVA(16%):</label>

                                                    </td>
                                                    <td>
                                                        <label id="impuesto1" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.Impuesto2, 2).ToString("N", formato)</label>
                                                    </td>
                                                </tr>
                                                 <tr>

                                                    <td style="text-align: right;">
                                                        <label class="col-form-label" style="display: inline-table;  font-weight: 500 !important; font-style: normal;"> IVA(18%):</label>

                                                    </td>
                                                    <td>
                                                        <label id="impuesto1" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.Impuesto1, 2).ToString("N", formato)</label>
                                                    </td>
                                                </tr>
                                                 <tr>

                                                    <td style="text-align: right;">
                                                        <label class="col-form-label" style="display: inline-table;  font-weight: 500 !important; font-style: normal;"> Otros Cargos (10%):</label>

                                                    </td>
                                                    <td>
                                                        <label id="impuesto1" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.Impuesto4, 2).ToString("N", formato)</label>
                                                    </td>
                                                </tr>

                                            }
                                             else if (Model.Pais == "H")
                                            {
                                                <tr>

                                                    <td style="text-align: right;">
                                                        <label class="col-form-label" style="display: inline-table;  font-weight: 500 !important; font-style: normal;"> ISV(15%):</label>

                                                    </td>
                                                    <td>
                                                        <label id="impuesto1" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.Impuesto2, 2).ToString("N", formato)</label>
                                                    </td>
                                                </tr>
                                                 <tr>

                                                    <td style="text-align: right;">
                                                        <label class="col-form-label" style="display: inline-table;  font-weight: 500 !important; font-style: normal;"> ISV(18%):</label>

                                                    </td>
                                                    <td>
                                                        <label id="impuesto1" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.Impuesto1, 2).ToString("N", formato)</label>
                                                    </td>
                                                </tr>
                                                 <tr>

                                                    <td style="text-align: right;">
                                                        <label class="col-form-label" style="display: inline-table;  font-weight: 500 !important; font-style: normal;"> Otros Cargos (10%):</label>

                                                    </td>

                                                    <td>
                                                        <label id="impuesto1" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.Impuesto4, 2).ToString("N", formato)</label>
                                                    </td>
                                                </tr>

                                                 <tr>

                                                    <td style="text-align: right;">
                                                        <label class="col-form-label" style="display: inline-table;  font-weight: 500 !important; font-style: normal;"> Turismo (4%):</label>

                                                    </td>

                                                    <td>
                                                        <label id="impuesto8" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.Impuesto8, 2).ToString("N", formato)</label>
                                                    </td>
                                                </tr>

                                            }
                                            else if (Model.Pais == "E")
                                            {
                                                <tr>

                                                    <td style="text-align: right;">
                                                        <label class="col-form-label" style="display: inline-table;  font-weight: 500 !important; font-style: normal;"> I.V.A(12%):</label>

                                                    </td>
                                                       
                                                    <td>
                                                        <label id="impuesto13" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.Impuesto13, 2).ToString("N", formato)</label>
                                                    </td>
                                                </tr>
                                                <tr>

                                                    <td style="text-align: right;">
                                                        <label class="col-form-label" style="display: inline-table;  font-weight: 500 !important; font-style: normal;"> I.V.A(15%):</label>

                                                    </td>
                                                       
                                                    <td>
                                                        <label id="impuesto1" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.Impuesto1, 2).ToString("N", formato)</label>
                                                    </td>
                                                </tr>
                                                <tr>

                                                    <td style="text-align: right;">
                                                        <label class="col-form-label" style="display: inline-table;  font-weight: 500 !important; font-style: normal;">12% (Otros Cargos):</label>

                                                    </td>
                                                    <td>
                                                        <label id="impuesto4" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.Impuesto4, 2).ToString("N", formato)</label>
                                                    </td>
                                                </tr>
                                               

                                                <tr>

                                                    <td style="text-align: right;">
                                                        <label class="col-form-label" style="display: inline-table;  font-weight: 500 !important; font-style: normal;"> 10% (Propinas):</label>

                                                    </td>

                                                    <td>
                                                        <label id="impuesto8" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.Impuesto8, 2).ToString("N", formato)</label>
                                                    </td>
                                                </tr>

                                            }

                                            else if (Model.Pais == "G")
                                            {
                                                <tr>

                                                    <td style="text-align: right;">
                                                        <label class="col-form-label" style="display: inline-table;  font-weight: 500 !important; font-style: normal;"> I.V.A(12%):</label>

                                                    </td>

                                                    <td>
                                                        <label id="impuesto13" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.Impuesto13, 2).ToString("N", formato)</label>
                                                    </td>
                                                </tr>
                                          
                                                <tr>

                                                    <td style="text-align: right;">
                                                        <label class="col-form-label" style="display: inline-table;  font-weight: 500 !important; font-style: normal;"> Hospedaje:</label>

                                                    </td>
                                                    <td>
                                                        <label id="impuesto4" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.Impuesto4, 2).ToString("N", formato)</label>
                                                    </td>
                                                </tr>


                                                <tr>

                                                    <td style="text-align: right;">
                                                        <label class="col-form-label" style="display: inline-table;  font-weight: 500 !important; font-style: normal;"> Petróleo:</label>

                                                    </td>

                                                    <td>
                                                        <label id="impuesto8" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.Impuesto8, 2).ToString("N", formato)</label>
                                                    </td>
                                                </tr>

                                            }
                                            <tr>

                                                <td style="text-align: right;">
                                                    <label class="col-form-label" style="display: inline-table;  font-weight: 500 !important; font-style: normal;"> Total:</label>

                                                </td>
                                                <td>
                                                    <label id="total" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.Total.Value, 2).ToString("N", formato)</label>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>


                        </div>

                        @if (!string.IsNullOrEmpty(Roles.Where(a => a == "8").FirstOrDefault()))
                        {
                            @if (Model.Liquidacion.EncCierre.Estado == "E")
                            {
                                @if (Model.Liquidacion.EncCierre.idLogin != int.Parse(((ClaimsIdentity)User.Identity).Claims.Where(d => d.Type == ClaimTypes.Actor).Select(s1 => s1.Value).FirstOrDefault()) && !bandera)
                                {
                                    @if (Model.Liquidacion.EncCierre.idLoginAceptacion == int.Parse(((ClaimsIdentity)User.Identity).Claims.Where(d => d.Type == ClaimTypes.Actor).Select(s1 => s1.Value).FirstOrDefault()))
                                    {
                                        <div class="row">
                                            <div class="col-4">
                                            </div>
                                            <div class="col-12">
                                                <button onclick="javascript: Aceptar();" class="btn btn-w-m btn-primary" id="btnAceptar" title="Aceptar">Aceptar</button> &nbsp;
                                                &nbsp;
                                                <button onclick="javascript: Rechazar();" id="btnRechazar" class="btn btn-w-m btn-danger" title="Rechazar">Rechazar</button>

                                            </div>

                                        </div>
                                    }
                                    
                                }
                            }
                        }

                    </div>
                    <!-- /.col -->
                    <!-- /.row -->
                    <!-- /.row -->

                </div>

            </div>


            <!-- Default box -->

        </div>
    </div>


    <div class="box">
        <div class="box-header with-border">
            <div class="row">
                <div class="col-md-6">
                    <div class="row">
                        <div class="col-md-12">
                            <label class="col-form-label">Email:</label>
                        </div>
                        <div class="col-md-12">
                            <input id="emailEnvio" class="form-control" type="email" placeholder="Email a enviar la liquidación" />

                        </div>
                    </div>

                    <div class="form-group row">
                        <div class="col-md-12">
                            <label class="col-form-label">C.C:</label>
                        </div>
                        <div class="col-md-12">
                            <input id="emailCCEnvio" class="form-control" type="email" placeholder="Copia del email" />

                        </div>
                    </div>

                    <div class="d-flex justify-content-end">

                        <button onclick="javascript: EnviarCorreo();" class="btn btn-w-m btn-primary" id="btnAceptar" title="Enviar Correo">Enviar</button>
                        &nbsp;
                        <button title="PDF" type="button" class="btn btn-danger" onclick="javascript: ImprimirPantalla()">PDF</button>
                    </div>

                </div>
                <div class="col-sm-6">
                </div>
            </div>
        </div>
    </div>

</section>






<!--Impresion-->
<div id="idHtml2" hidden>
    <div class="row">

        <div class="col-12">
            <div class="page-header mt-0">
                <h2 class="d-inline"><span class="font-size-24">Liquidación No:   @Model.Liquidacion.EncCierre.idCierre</span></h2>
                <label hidden id="idCierre" style="line-height: 32px;">
                    @Model.Liquidacion.EncCierre.idCierre
                </label>
                <br />
                <div class="text-left">
                    <div class="row">

                        <div class="col-4">
                            <h5> <b>Periodo:</b> @Model.Liquidacion.EncCierre.Periodo</h5>

                        </div>

                        <div class="col-4">
                            <h5> <b>Fecha:</b>   @DateTime.Now.ToString("dd/MM/yyyy")</h5>

                        </div>
                         

                    </div>
                </div>
            </div>
        </div>
        <!-- /.col -->
    </div>
    <!-- info row -->
    <div class="row invoice-info">
        <div class="col-md-4 invoice-col">
            <strong>Usuario</strong>
            <address>
                <strong class="text-blue font-size-24"> @( Model.Usuarios.Where(a => a.id == Model.Liquidacion.EncCierre.idLogin).FirstOrDefault() == null ? "Usuario Inexistente" : Model.Usuarios.Where(a => a.id == Model.Liquidacion.EncCierre.idLogin).FirstOrDefault().id + " - "+ Model.Usuarios.Where(a => a.id == Model.Liquidacion.EncCierre.idLogin).FirstOrDefault().Nombre)  </strong>


            </address>
        </div>



        <!-- /.col -->
    </div>
    <!-- /.row -->
    <!-- Table row -->

    <div class="row">
        <div class="col-12 table-responsive">
            <table class="table table-bordered">
                <thead>
                    <tr class="bg-pale-info">
                        <th class="text-center">Cons. Hacienda</th>
                        <th class="text-center">Fecha</th>
                        <th class="text-center">Cod. Proveedor</th>
                        <th class="text-center">Proveedor</th>
                        <th class="text-center">Tipo de Gasto</th>
                        <th class="text-center">Comentario</th>
                        <th class="text-center">Total</th>


                    </tr>
                </thead>
                <tbody>

                    @foreach (var item in Model.Objeto)
                    {
                        <tr>

                            @if (string.IsNullOrEmpty(item.ImagenB64))
                            {
                                <td align="center" style="padding-top:15px;">  <a style="font-size:15px;" href="@item.PdfFactura" target="_blank">@item.ConsecutivoHacienda </a></td>
                            }
                            else
                            {
                                <td align="center" style="padding-top:15px;">  <a style="font-size:15px; text-decoration: underline; text-decoration-color:blue; color: blue;"  >@item.ConsecutivoHacienda </a></td>
                            }







                            <td class="text-center">@item.FecFactura.Value.ToString("dd/MM/yyyy") </td>
                            <td>

                                @if (Model.Pais == "P")
                                {
                                    <p style="font-size:13px;">@item.CodProveedor.Split("[")[0]  [ @item.CodProveedor.Split("[")[1] ]   </p>
                                }
                                else if (Model.Pais == "C")
                                {
                                    <p style="font-size:13px;">@item.CodProveedor </p>
                                }
                                else if (Model.Pais == "N")
                                {
                                    <p style="font-size:13px;">@item.CodProveedor.Split("[")[0]   </p>

                                }




                            </td>
                            <td>   @item.NomProveedor</td>
                            <td>   @item.TipoGasto</td>
                            <td>   @(item.Comentario == null ? "" : item.Comentario)</td>
                            <td> @decimal.Round(item.TotalComprobante.Value, 2).ToString("N", formato)</td>


                        </tr>
                    }


                </tbody>
            </table>
        </div>
    </div>
    <div class="row">
        <div class="col-md-6">

            <div class="form-group">
                <label>Observaciones</label>
                <div class="col-md-12">
                    @if (Model.Liquidacion.EncCierre.Estado == "E")
                    {
                        @if (!string.IsNullOrEmpty(Roles.Where(a => a == "8").FirstOrDefault()))
                        {
                            @if (Model.Liquidacion.EncCierre.idLogin != int.Parse(((ClaimsIdentity)User.Identity).Claims.Where(d => d.Type == ClaimTypes.Actor).Select(s1 => s1.Value).FirstOrDefault()) && !bandera)
                            {
                                <textarea rows="5" class="form-control" id="Comentario" asp-for="Liquidacion.EncCierre.Observacion"></textarea>
                            }
                            else
                            {
                                <textarea rows="5" class="form-control" id="Comentario" asp-for="Liquidacion.EncCierre.Observacion" readonly></textarea>
                            }
                        }
                        else
                        {
                            <textarea rows="5" class="form-control" id="Comentario" asp-for="Liquidacion.EncCierre.Observacion" readonly></textarea>
                        }
                    }
                    else
                    {
                        <textarea rows="5" class="form-control" id="Comentario" asp-for="Liquidacion.EncCierre.Observacion" readonly></textarea>
                    }
                </div>



            </div>

        </div>


        <div class="col-md-6" style="text-align: right;">
            <div class="row">

                <div class="col-md-12">

                    <table class="table">
                        <tbody>
                            <tr>
                                <td style="text-align: right;">
                                    <label class="col-form-label" style="display: inline-table; font-weight: 500 !important; font-style: normal;">SubTotal:</label>

                                </td>
                                <td>
                                    <label id="subtotal" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.SubTotal.Value, 2).ToString("N", formato)</label>
                                </td>

                            </tr>
                            <tr>

                                <td style="text-align: right;">
                                    <label class="col-form-label" style="display: inline-table;  font-weight: 500 !important; font-style: normal;"> Descuento:</label>

                                </td>
                                <td>
                                    <label id="descuento" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.Descuento.Value, 2).ToString("N", formato)</label>
                                </td>
                            </tr>
                            <tr>

                                <td style="text-align: right;">
                                    <label class="col-form-label" style="display: inline-table;  font-weight: 500 !important; font-style: normal;"> Impuesto:</label>

                                </td>
                                <td>
                                    <label id="impuesto" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.Impuestos.Value, 2).ToString("N", formato)</label>
                                </td>
                            </tr>

                            @if (Model.Pais == "C")
                            {



                                <tr>

                                    <td style="text-align: right;">
                                        <label class="col-form-label" style="display: inline-table;  font-weight: 500 !important; font-style: normal;"> I.V.A 1:</label>

                                    </td>
                                    <td>
                                        <label id="impuesto1" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.Impuesto1, 2).ToString("N", formato)</label>
                                    </td>
                                </tr>

                                <tr>

                                    <td style="text-align: right;">
                                        <label class="col-form-label" style="display: inline-table;  font-weight: 500 !important; font-style: normal;"> I.V.A 2:</label>

                                    </td>
                                    <td>
                                        <label id="impuesto2" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.Impuesto2, 2).ToString("N", formato)</label>
                                    </td>
                                </tr>

                                <tr>

                                    <td style="text-align: right;">
                                        <label class="col-form-label" style="display: inline-table;  font-weight: 500 !important; font-style: normal;"> I.V.A 4:</label>

                                    </td>
                                    <td>
                                        <label id="impuesto4" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.Impuesto4, 2).ToString("N", formato)</label>
                                    </td>
                                </tr>

                                <tr>

                                    <td style="text-align: right;">
                                        <label class="col-form-label" style="display: inline-table;  font-weight: 500 !important; font-style: normal;"> I.V.A 8:</label>

                                    </td>
                                    <td>
                                        <label id="impuesto8" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.Impuesto8, 2).ToString("N", formato)</label>
                                    </td>
                                </tr>

                                <tr>

                                    <td style="text-align: right;">
                                        <label class="col-form-label" style="display: inline-table;  font-weight: 500 !important; font-style: normal;"> I.V.A 13:</label>

                                    </td>
                                    <td>
                                        <label id="impuesto13" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.Impuesto13, 2).ToString("N", formato)</label>
                                    </td>
                                </tr>

                                <tr>

                                    <td style="text-align: right;">
                                        <label class="col-form-label" style="display: inline-table;  font-weight: 500 !important; font-style: normal;"> Otros Cargos:</label>

                                    </td>
                                    <td>
                                        <label id="impuesto13" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.TotalOtrosCargos, 2).ToString("N", formato)</label>
                                    </td>
                                </tr>
                            }
                            else if (Model.Pais == "P")
                            {
                                <tr>

                                    <td style="text-align: right;">
                                        <label class="col-form-label" style="display: inline-table;  font-weight: 500 !important; font-style: normal;"> ITBMS(7%):</label>

                                    </td>
                                    <td>
                                        <label id="impuesto1" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.Impuesto1, 2).ToString("N", formato)</label>
                                    </td>
                                </tr>
                                <tr>

                                    <td style="text-align: right;">
                                        <label class="col-form-label" style="display: inline-table;  font-weight: 500 !important; font-style: normal;"> ITBMS(10%):</label>

                                    </td>
                                    <td>
                                        <label id="impuesto2" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.Impuesto2, 2).ToString("N", formato)</label>
                                    </td>
                                </tr>
                            }
                            else if (Model.Pais == "N")
                            {
                                <tr>

                                    <td style="text-align: right;">
                                        <label class="col-form-label" style="display: inline-table;  font-weight: 500 !important; font-style: normal;"> IV(13%):</label>

                                    </td>
                                    <td>
                                        <label id="impuesto1" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.Impuesto1, 2).ToString("N", formato)</label>
                                    </td>
                                </tr>
                                <tr>

                                    <td style="text-align: right;">
                                        <label class="col-form-label" style="display: inline-table;  font-weight: 500 !important; font-style: normal;"> IVA(15%):</label>

                                    </td>
                                    <td>
                                        <label id="impuesto2" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.Impuesto2, 2).ToString("N", formato)</label>
                                    </td>
                                </tr>
                            }
                            else if (Model.Pais == "D")
                            {
                                <tr>

                                    <td style="text-align: right;">
                                        <label class="col-form-label" style="display: inline-table;  font-weight: 500 !important; font-style: normal;"> IVA(18%):</label>

                                    </td>
                                    <td>
                                        <label id="impuesto1" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.Impuesto1, 2).ToString("N", formato)</label>
                                    </td>
                                </tr>

                            }

                               else if (Model.Pais == "H")
                            {
                                <tr>

                                    <td style="text-align: right;">
                                        <label class="col-form-label" style="display: inline-table;  font-weight: 500 !important; font-style: normal;"> ISV(18%):</label>

                                    </td>
                                    <td>
                                        <label id="impuesto1" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.Impuesto1, 2).ToString("N", formato)</label>
                                    </td>
                                </tr>



                            }
                            else if (Model.Pais == "E")
                            {
                                <tr>

                                    <td style="text-align: right;">
                                        <label class="col-form-label" style="display: inline-table;  font-weight: 500 !important; font-style: normal;"> I.V.A(12%):</label>

                                    </td>
                                    <td>
                                        <label id="impuesto13" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.Impuesto13, 2).ToString("N", formato)</label>
                                    </td>
                                </tr>
                                     <tr>

                                        <td style="text-align: right;">
                                            <label class="col-form-label" style="display: inline-table;  font-weight: 500 !important; font-style: normal;"> I.V.A(15%):</label>

                                        </td>
                                        <td>
                                            <label id="impuesto1" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.Impuesto1, 2).ToString("N", formato)</label>
                                        </td>
                                    </tr>
                                <tr>

                                    <td style="text-align: right;">
                                        <label class="col-form-label" style="display: inline-table;  font-weight: 500 !important; font-style: normal;">12% (Otros Cargos):</label>

                                    </td>
                                    <td>
                                        <label id="impuesto4" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.Impuesto4, 2).ToString("N", formato)</label>
                                    </td>
                                </tr>


                                <tr>

                                    <td style="text-align: right;">
                                        <label class="col-form-label" style="display: inline-table;  font-weight: 500 !important; font-style: normal;"> 10% (Propinas):</label>

                                    </td>

                                    <td>
                                        <label id="impuesto8" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.Impuesto8, 2).ToString("N", formato)</label>
                                    </td>
                                </tr>

                            }

                            else if (Model.Pais == "G")
                            {
                                <tr>

                                    <td style="text-align: right;">
                                        <label class="col-form-label" style="display: inline-table;  font-weight: 500 !important; font-style: normal;"> I.V.A(12%):</label>

                                    </td>

                                    <td>
                                        <label id="impuesto13" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.Impuesto13, 2).ToString("N", formato)</label>
                                    </td>
                                </tr>

                                <tr>

                                    <td style="text-align: right;">
                                        <label class="col-form-label" style="display: inline-table;  font-weight: 500 !important; font-style: normal;"> Hospedaje:</label>

                                    </td>
                                    <td>
                                        <label id="impuesto4" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.Impuesto4, 2).ToString("N", formato)</label>
                                    </td>
                                </tr>


                                <tr>

                                    <td style="text-align: right;">
                                        <label class="col-form-label" style="display: inline-table;  font-weight: 500 !important; font-style: normal;"> Petróleo:</label>

                                    </td>

                                    <td>
                                        <label id="impuesto8" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.Impuesto8, 2).ToString("N", formato)</label>
                                    </td>
                                </tr>

                            }
                            <tr>

                                <td style="text-align: right;">
                                    <label class="col-form-label" style="display: inline-table;  font-weight: 500 !important; font-style: normal;"> Total:</label>

                                </td>
                                <td>
                                    <label id="total" style="display: inline-table;  font-weight: bold !important; font-style: normal;">@decimal.Round(@Model.Liquidacion.EncCierre.Total.Value, 2).ToString("N", formato)</label>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>


        </div>
    </div>
</div>
